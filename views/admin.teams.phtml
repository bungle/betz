<?php $layout = 'layouts/layout.admin.phtml'; ?>
<div class="page-header">
<h1>
    Joukkueet
    <small>Lis채채 ja muokkaa joukkueita</small>
</h1>
</div>

<div class="row">
    <div class="span8"><h5>Joukkue</h5></div>
    <div class="span2" style="text-align: center;"><h5>Lyhenne</h5></div>
    <div class="span4" style="text-align: center;"><h5>Sijoitus/Toiminnot</h5></div>
</div>
<form method="post" action="<?php echo url('~/admin/teams'); ?>">
<div class="row">
    <div class="span8">
        <input type="text" name="name" class="large" style="width: 365px;">
    </div>
    <div class="span2" style="text-align: center;">
        <input type="text" name="abbr" class="large" maxlength="3" style="width: 30px;">
    </div>
    <div class="span4" style="text-align: center;">
        <input class="btn primary" type="submit" value="Lis채채" style="width: 132px;">
    </div>
</div>
</form>

<?php foreach($teams as $team): ?>
<div class="row">
    <div class="span8 f32">
        <div class="flag <?php echo $team['abbr']; ?>" style="padding-left: 40px; height: 32px; line-height: 32px;"><?php echo $team['name']; ?></div>
    </div>
    <div class="span2" style="text-align: center; line-height: 32px;">
        <?php echo $team['abbr']; ?>
    </div>
    <div class="span4" style="text-align: center;">
            <?php echo $team['ranking']; ?>
            
        </form>
    </div>
</div>
<?php endforeach; ?>

<?php block($scripts); ?>
<script>
$('input:submit.team').each(function() {
    var input = $(this);
    var form = $(this.form);
    input.click(function() {
        $.ajax({
            url: form.attr('action'),
            type: 'POST',
            data: form.serialize(),
            success: function() {
                $.pnotify({
                    pnotify_title: 'Joukkue tallennettu',
                    pnotify_text: 'Joukkue tallennettiin onnistuneesti.',
                    pnotify_delay: 3000
                });
            },
            error: function() {
                $.pnotify({
                    pnotify_title: 'Virhe joukkueen tallennuksessa',
                    pnotify_text: 'Joukkueen tallennuksessa tapahtui virhe.',
                    pnotify_type: 'error',
                    pnotify_delay: 3000
                });
            }
        });        
        return false;
    });
});
</script>
<?php block(); ?>
